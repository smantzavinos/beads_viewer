{"id":"bv-2a4","title":"Time-Travel Graph Diffing","description":"Compare graph structure across git commits to understand how the project evolved and detect structural regressions.\n\n## Background \u0026 Motivation\nSince beads are stored in git, we have full history available. Questions like 'What changed since last week?' or 'Did my changes introduce a bottleneck?' are answerable but not currently exposed.\n\n## Value Proposition\n- For Humans: Visualize progress, understand what changed during a sprint, postmortem analysis\n- For AI Agents: Structural regression detection - validate changes before committing\n\n## Technical Approach\n1. Add git history loader (read files at specific commit)\n2. Create snapshot comparison logic\n3. Generate diff report (new/closed issues, metric changes, new cycles)\n4. CLI: --diff-since \u003ccommit|date\u003e and --as-of \u003ccommit|date\u003e\n5. TUI: Highlight changed items\n\n## Key Features\n- Load historical state without checking out\n- Compare metrics (PageRank, betweenness) between snapshots\n- Detect new cycles or bottlenecks\n- 'What would change if I close these issues?' simulation","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-26T23:36:24.908588941Z","updated_at":"2025-11-27T00:52:08.797072508Z","closed_at":"2025-11-27T00:52:08.797072508Z","labels":["analysis","git-integration","history"]}
{"id":"bv-2a4.1","title":"Implement git history loader for beads files","description":"Load beads JSONL from specific git commit via 'git show \u003ccommit\u003e:.beads/beads.base.jsonl'. Beads tracks JSONL in git (SQLite is gitignored), so historical states are accessible. Support SHA, branch, tag, date resolution. Cache results for repeated access.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:40:11.831767762Z","updated_at":"2025-11-27T00:38:43.183395978Z","closed_at":"2025-11-27T00:38:43.183395978Z","labels":["git","loader"]}
{"id":"bv-2a4.2","title":"Create snapshot comparison and diff generation","description":"Compare two graph snapshots: NewIssues, ClosedIssues, RemovedIssues, ModifiedIssues, NewCycles, ResolvedCycles, MetricDelta.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:40:11.86809792Z","updated_at":"2025-11-27T00:44:08.356760918Z","closed_at":"2025-11-27T00:44:08.356760918Z","labels":["analysis","diff"],"dependencies":[{"issue_id":"bv-2a4.2","depends_on_id":"bv-2a4.1","type":"blocks","created_at":"2025-11-26T23:40:24.793170034Z","created_by":"daemon"}]}
{"id":"bv-2a4.3","title":"Add --diff-since and --as-of CLI flags","description":"--diff-since \u003ccommit|date\u003e: Show changes since historical point. --as-of \u003ccommit|date\u003e: View state at point in time. --robot-diff for JSON output.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:40:11.908615408Z","updated_at":"2025-11-27T00:46:48.168851915Z","closed_at":"2025-11-27T00:46:48.168851915Z","labels":["cli","git"],"dependencies":[{"issue_id":"bv-2a4.3","depends_on_id":"bv-2a4.2","type":"blocks","created_at":"2025-11-26T23:40:24.835018931Z","created_by":"daemon"}]}
{"id":"bv-2a4.4","title":"Add TUI diff highlighting and history mode","description":"'T' enters time-travel mode. ğŸ†• badge on new issues, âœ… on newly closed. Diff summary in footer. Optional side panel.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:40:11.95681875Z","updated_at":"2025-11-27T00:51:05.91959913Z","closed_at":"2025-11-27T00:51:05.91959913Z","labels":["tui","visualization"],"dependencies":[{"issue_id":"bv-2a4.4","depends_on_id":"bv-2a4.2","type":"blocks","created_at":"2025-11-26T23:40:24.86441434Z","created_by":"daemon"}]}
{"id":"bv-52t","title":"Impact Radar \u0026 Drift Alerts","description":"Detect significant changes in graph metrics and alert when structure degrades.\n\n## Background \u0026 Motivation\nGraph metrics (PageRank, betweenness, cycles) can degrade over time without anyone noticing. A new cycle might be introduced, or a bottleneck might emerge. Proactive detection prevents issues from compounding.\n\n## Value Proposition\n- For Humans: Early warning when project health degrades\n- For AI Agents: Validate changes before committing - 'did I introduce a cycle?'\n\n## Technical Approach\n1. Baseline storage (snapshot of metrics at a point in time)\n2. Drift calculator (compare current to baseline)\n3. Threshold configuration (when to alert)\n4. CLI: --check-drift for CI integration\n\n## Alert Types\n- New cycles detected (critical)\n- Significant PageRank changes (potential new bottleneck)\n- Betweenness spike (new critical path node)\n- Density increase (complexity growing)\n\n## Success Criteria\n- CI can run --check-drift and fail on regressions\n- Clear exit codes: 0=OK, 1=critical, 2=warning\n- Human-readable and JSON output available","status":"open","priority":3,"issue_type":"epic","created_at":"2025-11-26T23:37:14.250670509Z","updated_at":"2025-11-26T23:49:42.25552932Z","labels":["ci","monitoring","quality"]}
{"id":"bv-52t.1","title":"Implement baseline storage and management","description":".bv/baseline.json stores metrics snapshot. --save-baseline creates. --baseline-info shows. Includes commit annotation.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-26T23:41:04.112619185Z","updated_at":"2025-11-26T23:41:04.112619185Z","labels":["drift","storage"]}
{"id":"bv-52t.2","title":"Create drift calculator with thresholds","description":"Compare current to baseline. Detect: new cycles (critical), PageRank changes (warning), density growth (info). Configurable thresholds in .bv/drift.yaml.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-26T23:41:04.152822369Z","updated_at":"2025-11-26T23:41:04.152822369Z","labels":["analysis","drift"],"dependencies":[{"issue_id":"bv-52t.2","depends_on_id":"bv-52t.1","type":"blocks","created_at":"2025-11-26T23:41:09.765068595Z","created_by":"daemon"}]}
{"id":"bv-52t.3","title":"Add --check-drift CLI for CI integration","description":"Exit codes: 0=OK, 1=critical, 2=warning. Human-readable and --robot-drift JSON output. CI example in docs.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-26T23:41:04.186627009Z","updated_at":"2025-11-26T23:41:04.186627009Z","labels":["ci","cli","drift"],"dependencies":[{"issue_id":"bv-52t.3","depends_on_id":"bv-52t.2","type":"blocks","created_at":"2025-11-26T23:41:09.795822648Z","created_by":"daemon"}]}
{"id":"bv-53","title":"Robot UX hardening for agents","description":"Epic to make bv robot commands deterministic, complete, and agent-friendly: expose full metrics, surface status/timeout info, reuse analysis across commands, deterministic ordering, safer diff defaults, clear schemas/docs, payload modes, hash/config metadata, and robust contract tests.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-15T15:29:45.937171-05:00","updated_at":"2025-12-15T15:29:45.937171-05:00"}
{"id":"bv-53.1","title":"Expose full robot-insights metric maps with schema controls","description":"Problem: robot-insights JSON only includes top lists because GraphStats stores metrics in unexported maps; agents canâ€™t look up per-issue scores. Deliverables: export or copy metric maps into an exported struct; include optional size controls (e.g., --insights-maps=all|topK|none, --insights-limit N); keep defaults safe; document field names/units. Consider payload size on large graphs and offer opt-in for full maps.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-15T15:29:51.016412-05:00","updated_at":"2025-12-15T15:29:51.016412-05:00","dependencies":[{"issue_id":"bv-53.1","depends_on_id":"bv-53","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-54","title":"Surface metric status/timeouts in robot outputs","description":"Problem: timeouts/approximations are hidden from robot outputs; agents canâ€™t tell if PageRank/Betweenness/HITS/cycles are partial. Deliverables: add exported MetricsStatus per metric (state=computed|approx|timeout|skipped, elapsed ms, sample size, skip reason), include in robot-insights and headers of plan/priority/diff where relevant; document semantics. Keep payload small (enums).","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-15T15:30:13.924192-05:00","updated_at":"2025-12-15T15:30:13.924192-05:00","dependencies":[{"issue_id":"bv-54","depends_on_id":"bv-53","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-55","title":"Reuse analysis/cache across robot commands","description":"Problem: each robot flag builds a new Analyzer; sequential calls recompute metrics and can diverge on timeouts. Deliverables: shared cached analyzer for robot invocations keyed by issues hash; optional --force-recompute; include hash in outputs; tests to ensure consistency across robot-insights/plan/priority calls.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-15T15:30:29.45595-05:00","updated_at":"2025-12-15T15:30:29.45595-05:00","dependencies":[{"issue_id":"bv-55","depends_on_id":"bv-53","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-56","title":"Deterministic ordering for tied metric outputs","description":"Problem: getTopItems and other sorts reorder equal-valued items nondeterministically, causing flaky robot outputs. Deliverables: apply secondary key (ID lexicographic) for all metric sorts (insights, recommendations, plan lists where applicable); add regression tests for determinism on equal scores.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T15:30:36.966715-05:00","updated_at":"2025-12-15T15:30:36.966715-05:00","dependencies":[{"issue_id":"bv-56","depends_on_id":"bv-53","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-57","title":"Safer robot diff defaults","description":"Problem: agents often run --diff-since without --robot-diff and receive human-readable text. Deliverables: auto-select JSON when stdout is non-TTY or BV_ROBOT=1; otherwise emit clear hint/error; include resolved revision info in JSON header; document behavior in help/README.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T15:30:56.440196-05:00","updated_at":"2025-12-15T15:30:56.440196-05:00","dependencies":[{"issue_id":"bv-57","depends_on_id":"bv-53","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-58","title":"Robot schema and help updates","description":"Problem: robot consumers lack concise, accurate schema docs and jq examples. Deliverables: README robot section + --robot-help additions describing fields, status semantics, payload modes/limits, hashes/config metadata, diff behavior; include sample jq snippets for common agent queries.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T15:31:08.345904-05:00","updated_at":"2025-12-15T15:31:08.345904-05:00","dependencies":[{"issue_id":"bv-58","depends_on_id":"bv-53","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"bv-58","depends_on_id":"bv-53.1","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"bv-58","depends_on_id":"bv-54","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"bv-58","depends_on_id":"bv-57","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"bv-58","depends_on_id":"bv-60","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-59","title":"Lightweight vs full robot-insights modes","description":"Goal: keep robot outputs fast on large graphs while preserving detail when requested. Deliverables: --robot-insights mode flag (summary|full) or similar; summary returns top lists + status, full includes metric maps; warn/estimate payload when full on XL graphs; honor size-based config; document behavior.","notes":"Cancelled: insights already performant; no split summary/full mode needed.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-15T15:31:14.355413-05:00","updated_at":"2025-12-15T15:33:36.4477-05:00","closed_at":"2025-12-15T15:33:36.4477-05:00","dependencies":[{"issue_id":"bv-59","depends_on_id":"bv-53","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"bv-59","depends_on_id":"bv-53.1","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"bv-59","depends_on_id":"bv-54","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-60","title":"Include data hash \u0026 analysis config in robot responses","description":"Goal: let agents correlate multiple robot calls and detect cache reuse or config changes. Deliverables: add data_hash, computed_at, and analysis config (size tier, approximations, timeouts) to robot outputs (insights/plan/priority/diff). Ensure hash matches cache reuse path; keep fields compact.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T15:31:22.070539-05:00","updated_at":"2025-12-15T15:31:22.070539-05:00","dependencies":[{"issue_id":"bv-60","depends_on_id":"bv-53","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"bv-60","depends_on_id":"bv-55","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"bv-60","depends_on_id":"bv-54","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-61","title":"Robot contract test suite","description":"Goal: lock in robot behavior and prevent regressions. Deliverables: snapshot JSON tests for robot-insights/plan/priority/diff on small fixtures; large-graph smoke to assert modes/limits/timeouts and status flags; deterministic ordering tests; cache reuse/hash consistency tests. Ensure fixtures minimal and updated alongside schema changes.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T15:31:28.889373-05:00","updated_at":"2025-12-15T15:31:28.889373-05:00","dependencies":[{"issue_id":"bv-61","depends_on_id":"bv-53","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"bv-61","depends_on_id":"bv-53.1","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"bv-61","depends_on_id":"bv-54","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"bv-61","depends_on_id":"bv-55","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"bv-61","depends_on_id":"bv-56","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"bv-61","depends_on_id":"bv-57","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"bv-61","depends_on_id":"bv-58","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"bv-61","depends_on_id":"bv-60","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-62","title":"Bead History \u0026 Code Correlation System","description":"# Bead History \u0026 Code Correlation System\n\n## Overview\nImplement a system to track the full lifecycle of beads (creation, claim, modification, closure) and correlate them with the git commits that implemented the work. This enables traceability from issue to code without requiring LLM inference.\n\n## User Stories\n- As a project lead, I want to see what code changes were made for each bead\n- As a developer, I want to know which bead drove a particular commit\n- As an AI agent, I want structured JSON data about bead-to-commit relationships\n- As a code reviewer, I want to understand the context behind changes\n\n## The Core Insight\nThe git history of beads.jsonl IS the source of truth:\n1. **Exact timestamps** - when each bead was created, modified, closed\n2. **Git author** - the agent/person who made each change  \n3. **Commit SHA** - links to all other files changed in that commit\n\nThis creates a direct, mechanical correlation chain with no LLM needed.\n\n## Correlation Methods (by confidence)\n| Method | Confidence | Description |\n|--------|------------|-------------|\n| co_committed | 95-99% | Code changed in same commit as bead status change |\n| explicit_id | 90-95% | Commit message contains bead ID |\n| temporal_author | 40-70% | Same author, within bead's active window |\n\n## Success Criteria\n- [ ] \\`bv --robot-history\\` outputs structured JSON of all correlations\n- [ ] \\`bv --bead-history \u003cid\u003e\\` shows history for a specific bead\n- [ ] TUI shows history in detail pane and dedicated view\n- [ ] Co-committed correlations have \u003e95% accuracy\n- [ ] Performance: \u003c2s for repos with 1000 commits\n\n## Non-Goals (for initial release)\n- Real-time commit watching (future enhancement)\n- GitHub/GitLab PR integration (future enhancement)\n- Automatic bead creation from commits (different feature)\n\n## Implementation Phases\n1. **Phase 1 (MVP)**: Core extraction + robot-history flag\n2. **Phase 2**: Additional correlation methods + confidence scoring\n3. **Phase 3**: TUI integration\n4. **Phase 4**: Performance optimization\n5. **Phase 5**: Testing and documentation\n\nSee docs/bead-history-feature-plan.md for complete specification.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-15T15:36:23.264985-05:00","updated_at":"2025-12-15T15:36:23.264985-05:00","labels":["epic","feature","v0.11","history"]}
{"id":"bv-63","title":"Define data types for bead history correlation","description":"# Data Types for Bead History Correlation\n\n## Context\nThis is the foundational task - all other history features depend on these types being well-designed. Getting this right is critical.\n\n## Types to Define\n\n### BeadEvent\nRepresents a single lifecycle event for a bead, extracted from git history.\n\n\\`\\`\\`go\ntype BeadEvent struct {\n    BeadID      string    \\`json:\"bead_id\"\\`\n    EventType   EventType \\`json:\"event_type\"\\`\n    Timestamp   time.Time \\`json:\"timestamp\"\\`\n    CommitSHA   string    \\`json:\"commit_sha\"\\`\n    CommitMsg   string    \\`json:\"commit_message\"\\`\n    Author      string    \\`json:\"author\"\\`       // Git author name\n    AuthorEmail string    \\`json:\"author_email\"\\` // Git author email\n}\n\ntype EventType string\nconst (\n    EventCreated  EventType = \"created\"      // Bead first appears in file\n    EventClaimed  EventType = \"claimed\"      // Status changed to in_progress\n    EventClosed   EventType = \"closed\"       // Status changed to closed\n    EventReopened EventType = \"reopened\"     // Status changed FROM closed\n    EventModified EventType = \"modified\"     // Other significant changes\n)\n\\`\\`\\`\n\n### CorrelatedCommit\nA code commit linked to a bead with confidence metadata.\n\n\\`\\`\\`go\ntype CorrelatedCommit struct {\n    SHA           string            \\`json:\"sha\"\\`\n    ShortSHA      string            \\`json:\"short_sha\"\\`\n    Message       string            \\`json:\"message\"\\`\n    Author        string            \\`json:\"author\"\\`\n    AuthorEmail   string            \\`json:\"author_email\"\\`\n    Timestamp     time.Time         \\`json:\"timestamp\"\\`\n    Files         []FileChange      \\`json:\"files\"\\`\n    Method        CorrelationMethod \\`json:\"method\"\\`\n    Confidence    float64           \\`json:\"confidence\"\\`\n    Reason        string            \\`json:\"reason\"\\`\n}\n\ntype FileChange struct {\n    Path       string \\`json:\"path\"\\`\n    Action     string \\`json:\"action\"\\`     // A=added, M=modified, D=deleted\n    Insertions int    \\`json:\"insertions\"\\`\n    Deletions  int    \\`json:\"deletions\"\\`\n}\n\ntype CorrelationMethod string\nconst (\n    MethodCoCommitted    CorrelationMethod = \"co_committed\"\n    MethodExplicitID     CorrelationMethod = \"explicit_id\"\n    MethodTemporalAuthor CorrelationMethod = \"temporal_author\"\n)\n\\`\\`\\`\n\n### BeadHistory\nThe complete correlation record for a single bead.\n\n### HistoryReport\nThe top-level output structure for --robot-history.\n\n## Design Decisions\n- Separate Events from milestones (Created/Claimed/Closed) for quick access\n- Include CommitIndex in HistoryReport for O(1) reverse lookup\n- CycleTime as pointer since not all beads have been closed\n\n## File Location\n\\`pkg/correlation/types.go\\`\n\n## Acceptance Criteria\n1. All types compile without errors\n2. JSON tags are consistent and documented\n3. String methods implemented for enum types\n4. Unit tests for serialization roundtrips\n5. Go doc comments on all exported types","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-15T15:36:44.906876-05:00","updated_at":"2025-12-15T15:36:44.906876-05:00","labels":["phase-1","types","foundation","history"]}
{"id":"bv-64","title":"Implement git history parser for beads.jsonl","description":"# Git History Parser for beads.jsonl\n\n## Context\nThis is the core extraction logic. We parse \\`git log -p -- .beads/beads.jsonl\\` to extract bead lifecycle events.\n\n## Git Command\n\\`\\`\\`bash\ngit log -p --follow --format=\"%H|%aI|%an|%ae|%s\" -- .beads/beads.jsonl\n\\`\\`\\`\n\n## Parsing Algorithm\n1. Run git log command\n2. Parse output commit by commit\n3. For each commit:\n   a. Parse commit metadata (SHA, timestamp, author, message)\n   b. Parse the diff section\n   c. For each changed line in diff:\n      - Parse old JSON (lines starting with -)\n      - Parse new JSON (lines starting with +)\n      - Detect what changed (new bead, status change, other)\n      - Create BeadEvent records\n4. Return chronologically sorted events\n\n## Diff Parsing Details\n\n### Detecting Bead Creation\n\\`\\`\\`diff\n+{\"id\":\"AUTH-123\",\"title\":\"Fix login\",\"status\":\"open\",...}\n\\`\\`\\`\nA line starting with \\`+\\` containing valid JSON = EventCreated\n\n### Detecting Status Changes\n\\`\\`\\`diff\n-{\"id\":\"AUTH-123\",...,\"status\":\"open\",...}\n+{\"id\":\"AUTH-123\",...,\"status\":\"in_progress\",...}\n\\`\\`\\`\nSame bead ID, different status = appropriate event type\n\n## Edge Cases to Handle\n1. Malformed JSON lines: Skip with warning\n2. Multiple beads changed in one commit: Generate event for each\n3. Empty commits: No events generated\n4. Merge commits: Parse like regular commits\n\n## Options Structure\n\\`\\`\\`go\ntype ExtractOptions struct {\n    Since     time.Time  // Only commits after this time\n    Until     time.Time  // Only commits before this time\n    Limit     int        // Max commits to process\n    BeadID    string     // Filter to single bead ID\n}\n\\`\\`\\`\n\n## File Location\n\\`pkg/correlation/extractor.go\\`\n\n## Acceptance Criteria\n1. Correctly parses sample git log output\n2. Handles all edge cases without panic\n3. Returns chronologically sorted events\n4. Supports filtering options\n5. Unit tests with mock git output","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-15T15:37:07.212505-05:00","updated_at":"2025-12-15T15:37:07.212505-05:00","labels":["phase-1","extraction","git","history"],"dependencies":[{"issue_id":"bv-64","depends_on_id":"bv-63","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-65","title":"Implement co-committed file extraction","description":"# Co-Committed File Extraction\n\n## Context\nThis is the highest-confidence correlation method (95-99%). When a bead status changes and code files change in THE SAME COMMIT, that's a direct causal link.\n\n## Why This Works\nDeveloper workflow:\n1. Write code to implement feature\n2. Mark bead as closed\n3. Commit both changes together\n\nThe code files in that commit ARE the implementation of the bead.\n\n## Git Command\n\\`\\`\\`bash\ngit show --name-status --format=\"\" \u003csha\u003e\n\\`\\`\\`\n\nOutput:\n\\`\\`\\`\nM       pkg/auth/login.go\nM       pkg/auth/session.go\nM       .beads/beads.jsonl\n\\`\\`\\`\n\n## Algorithm\n1. For each BeadEvent with status change (claimed/closed)\n2. Run \\`git show --name-status\\` for that commit\n3. Filter OUT bead files (.beads/*)\n4. Return code files only as CorrelatedCommit records\n\n## What Counts as \"Code Files\"?\nInclude: .go, .py, .js, .ts, .rs, .java, .yaml, .json, .md\nExclude: .beads/*, .bv/*, .git/*, node_modules/, vendor/\n\n## Getting Line Stats\n\\`\\`\\`bash\ngit show --numstat --format=\"\" \u003csha\u003e\n\\`\\`\\`\n\n## Confidence Scoring\nBase: 0.95\n\nAdjustments:\n- Commit message mentions bead ID: +0.04 â†’ 0.99\n- \u003e20 files changed (shotgun commit): -0.10 â†’ 0.85\n- Only test files changed: -0.05 â†’ 0.90\n\n## File Location\n\\`pkg/correlation/cocommit.go\\`\n\n## Acceptance Criteria\n1. Correctly extracts co-committed files for any commit\n2. Filters out bead files and non-code files\n3. Includes insertion/deletion stats\n4. Applies confidence adjustments correctly\n5. Handles commits with no code files gracefully","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-15T15:37:22.561715-05:00","updated_at":"2025-12-15T15:37:22.561715-05:00","labels":["phase-1","correlation","high-confidence","history"],"dependencies":[{"issue_id":"bv-65","depends_on_id":"bv-64","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-66","title":"Add --robot-history CLI flag (MVP)","description":"# Robot History CLI Flag (MVP)\n\n## Context\nThis completes the MVP. With this flag, AI agents can get structured JSON output of bead-to-commit correlations.\n\n## New Flags\n\\`\\`\\`go\nrobotHistory := flag.Bool(\"robot-history\", false,\n    \"Output bead-to-commit correlations as JSON\")\nbeadHistory := flag.String(\"bead-history\", \"\",\n    \"Show history for specific bead ID\")\nhistorySince := flag.String(\"history-since\", \"\",\n    \"Limit history to commits after this date/ref\")\nhistoryLimit := flag.Int(\"history-limit\", 500,\n    \"Max commits to analyze (0 = unlimited)\")\n\\`\\`\\`\n\n## Usage Examples\n\\`\\`\\`bash\n# All bead correlations\nbv --robot-history\n\n# Specific bead\nbv --bead-history AUTH-123\n\n# Last 30 days\nbv --robot-history --history-since \"30 days ago\"\n\\`\\`\\`\n\n## Output Format (HistoryReport JSON)\n\\`\\`\\`json\n{\n  \"generated_at\": \"2025-01-15T10:30:00Z\",\n  \"repo_path\": \"/path/to/repo\",\n  \"correlations\": [\n    {\n      \"bead_id\": \"AUTH-123\",\n      \"bead_title\": \"Fix login race condition\",\n      \"lifecycle\": {...},\n      \"code_commits\": [...]\n    }\n  ],\n  \"commit_index\": {\"ghi9012\": [\"AUTH-123\"]},\n  \"summary\": {\n    \"total_beads\": 58,\n    \"beads_with_correlation\": 45,\n    \"orphan_commits\": 15,\n    \"avg_confidence\": 0.87\n  }\n}\n\\`\\`\\`\n\n## Error Handling\n- If not in git repo: Error with helpful message\n- If beads.jsonl doesn't exist: Error message\n- If git history is empty: Return empty correlations array\n- If specific bead not found: Error with \"bead not found\" message\n\n## Update --robot-help\nAdd documentation for new flags in the robot help output.\n\n## File Location\n- Main logic: \\`cmd/bv/main.go\\` (add flag handling)\n- Correlator: \\`pkg/correlation/correlator.go\\` (orchestration)\n\n## Acceptance Criteria\n1. \\`bv --robot-history\\` outputs valid JSON\n2. \\`bv --bead-history \u003cid\u003e\\` filters to single bead\n3. \\`--history-since\\` and \\`--history-limit\\` work correctly\n4. Error messages are helpful and actionable\n5. \\`--robot-help\\` documents new flags\n6. Integration test with real repo\n\n## Note\nThis completes Phase 1 MVP - AI agents can now get bead-to-commit correlations!","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-15T15:37:38.627621-05:00","updated_at":"2025-12-15T15:37:38.627621-05:00","labels":["phase-1","cli","mvp","history"],"dependencies":[{"issue_id":"bv-66","depends_on_id":"bv-65","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-67","title":"Implement explicit bead ID matching in commit messages","description":"# Explicit Bead ID Matching\n\n## Context\nMany developers include bead/issue IDs in commit messages:\n- \"fix(auth): resolve login bug [AUTH-123]\"\n- \"Closes AUTH-123\"\n- \"Refs: beads-456, beads-789\"\n\nThis is high-confidence (90-95%) because the developer explicitly linked them.\n\n## Pattern Matching\n\\`\\`\\`go\nvar beadIDPatterns = []*regexp.Regexp{\n    // [ID] format\n    regexp.MustCompile(\\`\\\\[([A-Z]+-\\\\d+)\\\\]\\`),\n    \n    // Closes/Fixes/Refs keywords\n    regexp.MustCompile(\\`(?i)closes?\\\\s+#?([A-Z]+-\\\\d+)\\`),\n    regexp.MustCompile(\\`(?i)fix(?:es|ed)?\\\\s+#?([A-Z]+-\\\\d+)\\`),\n    regexp.MustCompile(\\`(?i)refs?\\\\s+#?([A-Z]+-\\\\d+)\\`),\n    \n    // beads-123 format\n    regexp.MustCompile(\\`(?i)beads?[-_](\\\\d+)\\`),\n    \n    // Generic ID at word boundary\n    regexp.MustCompile(\\`\\\\b([A-Z]{2,10}-\\\\d+)\\\\b\\`),\n}\n\\`\\`\\`\n\n## Finding Commits with Explicit References\n\\`\\`\\`bash\ngit log --grep=\"AUTH-123\" --format=\"%H|%aI|%an|%ae|%s\" --all\n\\`\\`\\`\n\n## Confidence Scoring\nBase: 0.90\n\nAdjustments:\n- \"Closes\" or \"Fixes\" keyword: +0.05 â†’ 0.95\n- Multiple IDs in message: -0.02 per extra ID\n- ID in brackets [AUTH-123]: +0.02\n\n## Avoiding Duplicates\nIf already correlated via co-committed, don't add explicit-id duplicate.\nIf both methods apply, keep co-committed (higher confidence).\n\n## Configurable Patterns\nAllow users to add custom patterns in .bv/config.yaml:\n\\`\\`\\`yaml\nhistory:\n  id_patterns:\n    - '\\\\bJIRA-\\\\d+\\\\b'\n    - '\\\\bGH-\\\\d+\\\\b'\n\\`\\`\\`\n\n## File Location\n\\`pkg/correlation/explicit.go\\`\n\n## Acceptance Criteria\n1. Extracts bead IDs from various message formats\n2. Uses git --grep for efficient searching\n3. Avoids duplicate correlations\n4. Supports custom patterns from config\n5. Unit tests for pattern matching","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T15:38:03.20931-05:00","updated_at":"2025-12-15T15:38:03.20931-05:00","labels":["phase-2","correlation","pattern-matching","history"],"dependencies":[{"issue_id":"bv-67","depends_on_id":"bv-66","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-68","title":"Implement temporal correlation with author matching","description":"# Temporal Correlation\n\n## Context\nWhen a bead was \"in progress\" from T1 to T2 by author \"bob@dev\", commits by bob@dev between T1 and T2 are LIKELY related to that bead.\n\nThis is lower confidence (40-70%) because:\n- Bob might have multiple beads in progress\n- The commit might be unrelated refactoring\n\nBut it's still useful as a fallback when other methods don't apply.\n\n## Algorithm\n1. Find bead's claimed timestamp (T1) and closed timestamp (T2)\n2. Find all commits by the claiming author between T1 and T2\n3. Filter out commits already correlated via higher-confidence methods\n4. Calculate dynamic confidence based on context\n\n## Dynamic Confidence Calculation\n\\`\\`\\`go\nfunc calculateTemporalConfidence(bead, commit, context) float64 {\n    base := 0.50\n    \n    // Factor 1: How many beads was this author working on?\n    if activeBeads == 1 {\n        base += 0.20  // Only one bead = higher confidence\n    } else if activeBeads \u003e 3 {\n        base -= 0.10  // Many beads = lower confidence\n    }\n    \n    // Factor 2: How long is the time window?\n    if window \u003c 4*time.Hour {\n        base += 0.10  // Short window = more focused\n    } else if window \u003e 7*24*time.Hour {\n        base -= 0.15  // Week+ window = lots of potential commits\n    }\n    \n    // Factor 3: Does commit touch files related to bead?\n    if pathsMatchBeadHints(commit.Files, bead.Title) {\n        base += 0.15  // File paths match keywords in title\n    }\n    \n    return clamp(base, 0.20, 0.85)\n}\n\\`\\`\\`\n\n## Path Hint Extraction\nExtract potential file paths from bead title/description:\n- File paths: path/to/file.go\n- Package names: pkg/auth, src/components\n- Keywords: auth, login, user, api, db, config\n\n## File Location\n\\`pkg/correlation/temporal.go\\`\n\n## Acceptance Criteria\n1. Finds commits within bead's active window\n2. Matches by author/email\n3. Dynamic confidence based on context\n4. Extracts and uses path hints\n5. Never overwrites higher-confidence correlations","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T15:38:20.551014-05:00","updated_at":"2025-12-15T15:38:20.551014-05:00","labels":["phase-2","correlation","heuristic","history"],"dependencies":[{"issue_id":"bv-68","depends_on_id":"bv-66","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-69","title":"Implement confidence scoring model","description":"# Confidence Scoring Model\n\n## Context\nDifferent correlation methods have different reliability. We need a consistent model for expressing and combining confidence scores.\n\n## Confidence Ranges by Method\n| Method | Range | Description |\n|--------|-------|-------------|\n| co_committed | 0.90-0.99 | Direct causation |\n| explicit_id | 0.85-0.95 | Developer intent |\n| temporal_author | 0.40-0.75 | Same person, right time |\n\n## Combining Multiple Signals\nIf a commit matches multiple methods:\n\\`\\`\\`go\nfunc CombineConfidence(scores []float64) float64 {\n    // Use highest as base\n    sort.Float64s(scores)\n    base := scores[len(scores)-1]\n    \n    // Boost slightly for each additional signal\n    for i := 0; i \u003c len(scores)-1; i++ {\n        boost := (1.0 - base) * 0.1 * scores[i]\n        base += boost\n    }\n    \n    return min(base, 0.99)\n}\n\\`\\`\\`\n\n## Filtering by Confidence\nSupport \\`--min-confidence\\` flag:\n\\`\\`\\`bash\nbv --robot-history --min-confidence 0.7\n\\`\\`\\`\n\n## Confidence Explanation\nGenerate human-readable explanations:\n- \"Changed in same commit as bead update\"\n- \"Commit message mentions AUTH-123\"\n- \"By bob@dev during active window\"\n\n## File Location\n\\`pkg/correlation/scorer.go\\`\n\n## Acceptance Criteria\n1. Each method has defined confidence range\n2. Multiple signals combine correctly\n3. \\`--min-confidence\\` filter works\n4. Explanations are human-readable\n5. Scores are deterministic (same input = same output)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T15:38:33.947136-05:00","updated_at":"2025-12-15T15:38:33.947136-05:00","labels":["phase-2","scoring","reliability","history"],"dependencies":[{"issue_id":"bv-69","depends_on_id":"bv-67","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"bv-69","depends_on_id":"bv-68","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-70","title":"Implement reverse lookup (commit â†’ bead)","description":"# Reverse Lookup: Commit â†’ Bead\n\n## Context\nSometimes you're looking at a commit and want to know which bead it relates to.\n\"Why was this change made? What bead drove it?\"\n\n## Two Access Patterns\n1. Via commit_index in HistoryReport (already built into structure)\n2. Direct CLI query: \\`bv --commit-bead \u003csha\u003e\\`\n\n## New CLI Flag\n\\`\\`\\`bash\n# Which bead(s) relate to this commit?\nbv --commit-bead abc1234\n\n# Output:\n{\n  \"commit\": \"abc1234\",\n  \"message\": \"fix(auth): resolve race condition\",\n  \"related_beads\": [\n    {\n      \"bead_id\": \"AUTH-123\",\n      \"bead_title\": \"Fix login race condition\",\n      \"method\": \"co_committed\",\n      \"confidence\": 0.95\n    }\n  ]\n}\n\\`\\`\\`\n\n## Orphan Commit Detection\nCommits that don't correlate to ANY bead:\n\\`\\`\\`go\nfunc FindOrphanCommits(report *HistoryReport) []CommitInfo {\n    correlated := make(map[string]bool)\n    for sha := range report.CommitIndex {\n        correlated[sha] = true\n    }\n    \n    var orphans []CommitInfo\n    for _, commit := range getAllCodeCommits() {\n        if !correlated[commit.SHA] {\n            orphans = append(orphans, commit)\n        }\n    }\n    return orphans\n}\n\\`\\`\\`\n\nThis is useful for code hygiene: \"These commits have no associated bead!\"\n\n## Summary Stats Update\nAdd to HistorySummary:\n- orphan_commits: Count of commits with no bead\n- orphan_ratio: orphan_commits / total_commits\n\n## File Location\n- \\`cmd/bv/main.go\\` (new flag)\n- \\`pkg/correlation/reverse.go\\` (lookup logic)\n\n## Acceptance Criteria\n1. \\`--commit-bead \u003csha\u003e\\` outputs correct JSON\n2. commit_index in report is accurate\n3. Orphan detection works\n4. Handles commits with multiple related beads\n5. Handles commits with no related beads gracefully","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T15:38:47.958405-05:00","updated_at":"2025-12-15T15:38:47.958405-05:00","labels":["phase-2","reverse-lookup","code-hygiene","history"],"dependencies":[{"issue_id":"bv-70","depends_on_id":"bv-69","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-71","title":"Create dedicated TUI history view","description":"# TUI History View\n\n## Context\nA dedicated view (accessible via 'H' key) showing all bead correlations in a browsable interface.\n\n## Layout\n\\`\\`\\`\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  ğŸ“œ BEAD HISTORY                                       [H] to close â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  Filter: [All â–¾] Author: [All â–¾] Confidence: [â‰¥50% â–¾]              â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  BEADS WITH HISTORY (45/58)            â”‚  COMMIT DETAILS             â”‚\nâ”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚\nâ”‚  â–¸ AUTH-123 Fix login race   2 commits â”‚  SHA: ghi9012               â”‚\nâ”‚    AUTH-456 Add OAuth        4 commits â”‚  Author: bob@dev            â”‚\nâ”‚    DB-789   Schema migration 1 commit  â”‚  Date: 2025-01-11           â”‚\nâ”‚    ...                                 â”‚                             â”‚\nâ”‚                                        â”‚  fix(auth): resolve         â”‚\nâ”‚                                        â”‚  race condition             â”‚\nâ”‚                                        â”‚                             â”‚\nâ”‚                                        â”‚  Files:                     â”‚\nâ”‚                                        â”‚  M pkg/auth/login.go        â”‚\nâ”‚                                        â”‚  M pkg/auth/session.go      â”‚\nâ”‚                                        â”‚                             â”‚\nâ”‚                                        â”‚  Correlation: 95%           â”‚\nâ”‚                                        â”‚  (co-committed)             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\\`\\`\\`\n\n## Model Structure\n\\`\\`\\`go\ntype HistoryViewModel struct {\n    report      *correlation.HistoryReport\n    histories   []correlation.BeadHistory  // Filtered list\n    selected    int                         // Selected bead index\n    commitIdx   int                         // Selected commit within bead\n    \n    // Filters\n    authorFilter     string\n    minConfidence    float64\n    \n    // UI state\n    width, height    int\n    focused          historyFocus  // list or detail\n}\n\\`\\`\\`\n\n## Key Bindings\n| Key | Action |\n|-----|--------|\n| j/k | Navigate bead list |\n| Tab | Switch focus (list â†” detail) |\n| Enter | Expand/collapse bead commits |\n| f | Open filter menu |\n| / | Search beads |\n| H | Close history view |\n\n## Integration Points\n- Add HistoryViewModel to main Model\n- Toggle with 'H' key in main view\n- Load correlation data lazily on first access\n\n## File Location\n\\`pkg/ui/history.go\\`\n\n## Acceptance Criteria\n1. 'H' key opens history view\n2. Bead list is navigable with j/k\n3. Commit details shown for selected bead\n4. Filters work correctly\n5. Responsive layout at different terminal sizes","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T15:39:14.851963-05:00","updated_at":"2025-12-15T15:39:14.851963-05:00","labels":["phase-3","tui","view","history"],"dependencies":[{"issue_id":"bv-71","depends_on_id":"bv-69","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-72","title":"Integrate history into bead detail pane","description":"# History in Detail Pane\n\n## Context\nWhen viewing a bead's details (right pane in split view), show its history and correlated commits at the bottom.\n\n## Layout Addition\n\\`\\`\\`\nâ”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚\nâ”‚  ğŸ“œ HISTORY                                                         â”‚\nâ”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚\nâ”‚  ğŸŸ¢ Created    Jan 10, 14:32    alice@dev                          â”‚\nâ”‚  ğŸ”µ Claimed    Jan 11, 09:15    bob@dev                            â”‚\nâ”‚  âš« Closed     Jan 11, 16:42    bob@dev    (7h 27m cycle time)     â”‚\nâ”‚                                                                     â”‚\nâ”‚  Related Commits:                                                   â”‚\nâ”‚  â–ˆâ–ˆâ–ˆâ–ˆ 95% ghi9012 fix(auth): resolve race condition                â”‚\nâ”‚            â””â”€â”€ pkg/auth/login.go (+45, -12)                        â”‚\nâ”‚            â””â”€â”€ pkg/auth/session.go (+8, -3)                        â”‚\n\\`\\`\\`\n\n## Implementation\n- Add renderBeadHistory() function\n- Lazy load history when bead is selected\n- Cache loaded history in model\n- Show confidence as visual bar\n\n## File Location\n\\`pkg/ui/detail.go\\` or extend \\`pkg/ui/view.go\\`\n\n## Acceptance Criteria\n1. History section appears in detail pane\n2. Lifecycle events displayed chronologically\n3. Commits shown with confidence bars\n4. Lazy loading prevents startup slowdown\n5. Works in both split and full-width modes","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T15:39:30.612896-05:00","updated_at":"2025-12-15T15:39:30.612896-05:00","labels":["phase-3","tui","detail-pane","history"],"dependencies":[{"issue_id":"bv-72","depends_on_id":"bv-71","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-73","title":"Add keybindings for history navigation","description":"# History Keybindings\n\n## New Global Keys\n| Key | Action |\n|-----|--------|\n| H | Toggle dedicated history view |\n| h | (on selected bead) Jump to history in detail pane |\n\n## History View Keys\n| Key | Action |\n|-----|--------|\n| j/k | Navigate bead list |\n| J/K | Navigate commits within selected bead |\n| Tab | Toggle focus: bead list â†” commit detail |\n| Enter | Open commit in browser (if remote configured) |\n| y | Copy commit SHA to clipboard |\n| f | Open filter menu |\n| / | Search beads by title/ID |\n| c | Toggle confidence threshold |\n| H or Esc | Close history view |\n\n## Update Help Overlay\nAdd history keys to the '?' help overlay.\n\n## File Location\n- \\`pkg/ui/update.go\\` (key handling)\n- \\`pkg/ui/help.go\\` (help text)\n\n## Acceptance Criteria\n1. H toggles history view\n2. All history-specific keys work\n3. Help overlay updated\n4. Keys don't conflict with existing bindings\n5. Intuitive navigation flow","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T15:39:42.291892-05:00","updated_at":"2025-12-15T15:39:42.291892-05:00","labels":["phase-3","tui","keybindings","history"],"dependencies":[{"issue_id":"bv-73","depends_on_id":"bv-72","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-74","title":"Implement caching layer for history data","description":"# History Caching Layer\n\n## Context\nParsing git history is expensive. We need to cache results to avoid re-parsing on every access.\n\n## Cache Key\n\\`\\`\\`go\ntype CacheKey struct {\n    HeadSHA       string  // Current git HEAD\n    BeadsHash     string  // Hash of beads.jsonl content\n    Options       string  // Serialized filter options\n}\n\\`\\`\\`\n\n## Cache Structure\n\\`\\`\\`go\ntype HistoryCache struct {\n    mu      sync.RWMutex\n    entries map[string]*CacheEntry\n    maxAge  time.Duration\n    maxSize int  // Max entries\n}\n\\`\\`\\`\n\n## Invalidation Strategy\nCache is invalid when:\n- git HEAD changed (new commits)\n- beads.jsonl content changed\n- Cache entry older than maxAge (default: 5 minutes)\n\n## Memory Management\n- Default max entries: 10\n- LRU eviction when full\n\n## File Location\n\\`pkg/correlation/cache.go\\`\n\n## Acceptance Criteria\n1. Cache hit returns data without git calls\n2. Cache invalidates on HEAD change\n3. Cache invalidates on beads.jsonl change\n4. LRU eviction works correctly\n5. Thread-safe for concurrent access\n6. Significant speedup on repeated access","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-15T15:40:01.85922-05:00","updated_at":"2025-12-15T15:40:01.85922-05:00","labels":["phase-4","performance","caching","history"],"dependencies":[{"issue_id":"bv-74","depends_on_id":"bv-73","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-75","title":"Support incremental history updates","description":"# Incremental History Updates\n\n## Context\nWhen only a few new commits exist since last cache, we shouldn't re-parse the entire history. Parse only new commits and merge.\n\n## Algorithm\n1. Find new commits since cached report (using LatestCommitSHA)\n2. If few new commits (\u003c100), parse only those\n3. Merge new events with existing correlations\n4. If too many new commits, full refresh is more efficient\n\n## Track Latest Commit\nAdd to HistoryReport: LatestCommitSHA string\n\n## Merge Logic\n- New beads: Add to correlations\n- Updated beads: Merge events, re-correlate if needed\n- Existing correlations: Keep if still valid\n\n## File Location\n\\`pkg/correlation/incremental.go\\`\n\n## Acceptance Criteria\n1. Detects when incremental update is possible\n2. Only parses new commits\n3. Correctly merges with existing data\n4. Falls back to full refresh when appropriate\n5. Performance improvement measurable","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-15T15:40:20.176523-05:00","updated_at":"2025-12-15T15:40:20.176523-05:00","labels":["phase-4","performance","incremental","history"],"dependencies":[{"issue_id":"bv-75","depends_on_id":"bv-74","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-76","title":"Optimize for large repositories","description":"# Large Repository Optimization\n\n## Context\nFor repos with 10,000+ commits, naive parsing is too slow. Need smarter strategies.\n\n## Strategies\n\n### 1. Default Commit Limit\n\\`\\`\\`go\nconst DefaultHistoryLimit = 500\n\\`\\`\\`\n\n### 2. Streaming Parser\nDon't load all git output into memory. Stream and parse line-by-line.\n\n### 3. Parallel File Stats\nBatch git show requests for multiple SHAs.\n\n### 4. Skip Old Beads\n\\`--history-closed-since \"90 days\"\\` - Only beads closed in last 90 days.\n\n### 5. Progress Indicator\nFor TUI, show progress while loading:\n\\`\\`\\`\nLoading history... 234/500 commits\n\\`\\`\\`\n\n## Benchmarking Targets\n- 100 commits: instant (\u003c100ms)\n- 1,000 commits: fast (\u003c1s)\n- 10,000 commits: acceptable (\u003c5s)\n\n## File Location\n- \\`pkg/correlation/stream.go\\` (streaming parser)\n- \\`pkg/correlation/batch.go\\` (batched git calls)\n\n## Acceptance Criteria\n1. 500 commit default limit\n2. Streaming parser doesn't OOM\n3. Batch file stats is faster than sequential\n4. Progress indicator in TUI\n5. Meets benchmark targets","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-15T15:40:20.215383-05:00","updated_at":"2025-12-15T15:40:20.215383-05:00","labels":["phase-4","performance","scale","history"],"dependencies":[{"issue_id":"bv-76","depends_on_id":"bv-75","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-77","title":"Comprehensive test suite for history feature","description":"# History Feature Test Suite\n\n## Test Categories\n\n### Unit Tests\n- Type serialization roundtrips\n- Git output parsing\n- Confidence scoring\n- Pattern matching for explicit IDs\n- Temporal window calculations\n\n### Integration Tests\n- Real git repo with sample history\n- End-to-end --robot-history\n- Cache invalidation\n- Incremental updates\n\n### Edge Case Tests\n- Empty git history\n- No beads.jsonl in history\n- Malformed JSON in old commits\n- Merge commits\n- Rebased history\n\n## Test Fixtures\nCreate fixtures in \\`tests/testdata/history/\\`:\n- sample_git_log.txt\n- sample_diff.txt\n- edge_cases/\n\n## Coverage Target\nAim for \u003e80% coverage on new correlation package.\n\n## File Location\n- \\`pkg/correlation/*_test.go\\`\n- \\`tests/testdata/history/\\`\n\n## Acceptance Criteria\n1. Unit tests for all public functions\n2. Integration tests with real git operations\n3. Edge cases documented and tested\n4. Coverage \u003e80%\n5. Tests run in CI","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T15:40:42.873446-05:00","updated_at":"2025-12-15T15:40:42.873446-05:00","labels":["phase-5","testing","quality","history"],"dependencies":[{"issue_id":"bv-77","depends_on_id":"bv-76","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-78","title":"Update README with history feature documentation","description":"# README Documentation Update\n\n## Sections to Add\n\n### Bead History \u0026 Code Correlation\n- What the feature does\n- How to use CLI flags\n- How to use TUI view\n- Confidence scoring explained\n- Example output\n\n## Example Content\n\\`\\`\\`markdown\n## ğŸ“œ Bead History \u0026 Code Correlation\n\nbv can correlate beads with the git commits that implemented them,\nproviding full traceability from issue to code.\n\n### CLI Usage\n\\\\\\`\\\\\\`\\\\\\`bash\nbv --robot-history              # See all correlations\nbv --bead-history AUTH-123      # History for specific bead\n\\\\\\`\\\\\\`\\\\\\`\n\n### How It Works\nbv parses the git history of your beads.jsonl file to extract\nlifecycle events and correlate with code commits.\nNo LLM or AI inference is used - correlations are purely mechanical.\n\\`\\`\\`\n\n## Acceptance Criteria\n1. Clear explanation of feature\n2. CLI examples with expected output\n3. TUI instructions with screenshots\n4. Confidence model explained","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-15T15:40:42.918446-05:00","updated_at":"2025-12-15T15:40:42.918446-05:00","labels":["phase-5","documentation","readme","history"],"dependencies":[{"issue_id":"bv-78","depends_on_id":"bv-77","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-79","title":"Update AGENTS.md with robot-history documentation","description":"# AGENTS.md Update for Robot History\n\n## Add to AGENTS.md\n\n### Bead-to-Commit Correlation\n- \\`bv --robot-history\\` â€” JSON output of all bead-to-commit correlations\n- \\`bv --bead-history \u003cid\u003e\\` â€” History for a specific bead\n- \\`bv --commit-bead \u003csha\u003e\\` â€” Which bead(s) relate to a commit\n\n### Correlation Methods (by confidence)\n| Method | Confidence | Description |\n|--------|------------|-------------|\n| co_committed | 95% | Code changed in same commit as bead |\n| explicit_id | 90% | Commit message contains bead ID |\n| temporal_author | 50-70% | Same author, in bead's active window |\n\n### Example Queries\n\\`\\`\\`bash\nbv --bead-history AUTH-123 | jq '.code_commits[].sha'\nbv --robot-history | jq '.summary.orphan_commits'\n\\`\\`\\`\n\n## Acceptance Criteria\n1. All history flags documented\n2. Example jq queries\n3. Confidence model explained\n4. Consistent with existing AGENTS.md style","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-15T15:40:42.967293-05:00","updated_at":"2025-12-15T15:40:42.967293-05:00","labels":["phase-5","documentation","agents","history"],"dependencies":[{"issue_id":"bv-79","depends_on_id":"bv-78","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"bv-9gf","title":"Semantic Vector Search","description":"Add natural language search via vector embeddings, enabling queries like 'memory leak issues' to find relevant results even without exact keyword matches.\n\n## Background \u0026 Motivation\nCurrent search is regex-based, requiring exact matches. Users want to search by meaning, not just keywords. AI agents benefit from semantic retrieval for RAG patterns.\n\n## Value Proposition\n- For Humans: 'that thing about memory leaks' actually finds it\n- For AI Agents: RAG over project history - 'how did we solve similar issues before?'\n\n## Technical Approach\n1. Local embeddings (start simple: sentence-transformers via subprocess or pure Go)\n2. Vector storage (sqlite-vec extension or simple flat file)\n3. Incremental indexing (embed on first access, update when issues change)\n4. Semantic search mode in CLI and TUI\n\n## Scope Control\nStart minimal:\n- Embed title + description only\n- Single embedding model\n- Top-10 results\n- No hybrid search initially\n\n## Dependencies \u0026 Risks\n- Embedding model choice affects quality and size\n- May require external tool (Python) initially\n- Could start with Go-native solution later","status":"open","priority":3,"issue_type":"epic","created_at":"2025-11-26T23:37:01.591735409Z","updated_at":"2025-11-26T23:37:01.591735409Z","labels":["ai-agent","search","semantic"]}
{"id":"bv-9gf.1","title":"Research and select embedding approach","description":"Evaluate: Python subprocess (sentence-transformers), Go-native, API-based, sqlite-vec. Consider quality, complexity, performance, binary size.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-26T23:40:52.628274794Z","updated_at":"2025-11-26T23:40:52.628274794Z","labels":["embedding","research"]}
{"id":"bv-9gf.2","title":"Implement vector storage and indexing","description":"sqlite-vec or flat file. Store issue_id, embedding, content_hash. Search returns top-k by similarity. Incremental updates.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-26T23:40:52.658015719Z","updated_at":"2025-11-26T23:40:52.658015719Z","labels":["search","storage","vectors"],"dependencies":[{"issue_id":"bv-9gf.2","depends_on_id":"bv-9gf.1","type":"blocks","created_at":"2025-11-26T23:41:04.036380545Z","created_by":"daemon"}]}
{"id":"bv-9gf.3","title":"Add semantic search CLI and TUI integration","description":"bv --search 'query' for semantic search. --robot-search outputs JSON. TUI: Ctrl+S toggles semantic/regex mode. First-run index build UX.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-26T23:40:52.687472442Z","updated_at":"2025-11-26T23:40:52.687472442Z","labels":["cli","search","tui"],"dependencies":[{"issue_id":"bv-9gf.3","depends_on_id":"bv-9gf.2","type":"blocks","created_at":"2025-11-26T23:41:04.075498522Z","created_by":"daemon"}]}
{"id":"bv-epf","title":"Multi-Repo Aggregation View","description":"Unified view across multiple .beads/ directories for monorepos and multi-service projects.\n\n## Background \u0026 Motivation\nOrganizations often have:\n- Monorepos with multiple services\n- Microservices with separate repos\n- Frontend/backend splits\n\nCurrently, bv only shows one project at a time.\n\n## Value Proposition\n- For Humans: Single view of all project issues\n- For AI Agents: Cross-repo dependency visibility, scoped queries\n\n## Technical Approach\n1. Workspace configuration file\n2. Namespaced IDs (repo:issue-id)\n3. Aggregate loader merging multiple sources\n4. Cross-repo dependency support\n5. Repo-scoped filtering\n\n## Key Challenges\n- ID collision handling\n- Performance with many repos\n- Cross-repo dependency semantics\n- Clear provenance in UI","status":"open","priority":2,"issue_type":"epic","created_at":"2025-11-26T23:36:47.330165384Z","updated_at":"2025-11-26T23:36:47.330165384Z","labels":["multi-repo","scalability"]}
{"id":"bv-epf.1","title":"Design workspace configuration schema","description":".bv/workspace.yaml schema: repos list with name/path/prefix. Auto-discovery mode for common layouts. Validation.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:40:38.960959499Z","updated_at":"2025-11-27T00:28:49.69998534Z","closed_at":"2025-11-27T00:28:49.69998534Z","labels":["configuration","multi-repo"]}
{"id":"bv-epf.2","title":"Implement namespaced ID system","description":"Format: \u003cprefix\u003e:\u003coriginal_id\u003e (e.g., BE:AUTH-123). Cross-repo deps use full namespaced IDs. Display adapts to context.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:40:39.005212011Z","updated_at":"2025-11-27T00:35:44.393367613Z","closed_at":"2025-11-27T00:35:44.393367613Z","labels":["data-model","multi-repo"],"dependencies":[{"issue_id":"bv-epf.2","depends_on_id":"bv-epf.1","type":"blocks","created_at":"2025-11-26T23:40:52.523325399Z","created_by":"daemon"}]}
{"id":"bv-epf.3","title":"Create aggregate loader for multiple repos","description":"LoadAll() merges repos. Namespacing during load. Failed repos logged but don't break. Parallel loading with errgroup.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-26T23:40:39.047698605Z","updated_at":"2025-11-26T23:40:39.047698605Z","labels":["loader","multi-repo","performance"],"dependencies":[{"issue_id":"bv-epf.3","depends_on_id":"bv-epf.2","type":"blocks","created_at":"2025-11-26T23:40:52.567719135Z","created_by":"daemon"}]}
{"id":"bv-epf.4","title":"Add --workspace CLI flag and TUI repo filter","description":"--workspace \u003cconfig\u003e loads multiple repos. --repo filters. TUI: repo indicator in header, toggle repos, [BE] prefix on items.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-26T23:40:39.092988926Z","updated_at":"2025-11-26T23:40:39.092988926Z","labels":["cli","multi-repo","tui"],"dependencies":[{"issue_id":"bv-epf.4","depends_on_id":"bv-epf.3","type":"blocks","created_at":"2025-11-26T23:40:52.597957664Z","created_by":"daemon"}]}
{"id":"bv-lkk","title":"AI-Aware Kanban Autoprioritizer","description":"Use graph metrics (PageRank, betweenness, freshness, blocker count) to suggest priority adjustments and surface high-impact items.\n\n## Background \u0026 Motivation\nThe analysis package computes rich metrics but they're only visible in the insights panel. Users and agents want actionable recommendations: 'These 5 items should be prioritized because they unblock the most work.'\n\n## Value Proposition\n- For Humans: 'Smart suggestions' that explain why items should be reprioritized\n- For AI Agents: --robot-priority provides a ranked work queue with reasoning\n\n## Technical Approach\n1. Create priority scoring function combining multiple metrics\n2. Generate recommendations comparing current vs suggested priority\n3. CLI: --robot-priority outputs priority-ranked JSON with explanations\n4. TUI: 'Suggested' badge/indicator on items\n\n## Scoring Function\nimpact_score = (\n    0.3 * normalized_pagerank +\n    0.3 * normalized_betweenness +\n    0.2 * blocker_count / max_blocker_count +\n    0.1 * freshness_penalty +\n    0.1 * explicit_priority_boost\n)","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-26T23:36:10.969534571Z","updated_at":"2025-11-27T01:03:35.76590347Z","closed_at":"2025-11-27T01:03:35.76590347Z","labels":["ai-agent","analysis","prioritization"]}
{"id":"bv-lkk.1","title":"Implement priority scoring function","description":"Create composite scoring combining PageRank (30%), Betweenness (30%), Blocker count (20%), Staleness (10%), Explicit priority (10%).\n\n## Algorithm\nfunc (a *Analyzer) ComputeImpactScore(issue *model.Issue) ImpactScore:\n  - Normalize all metrics to 0-1 range\n  - Apply weights: 0.3*pagerank + 0.3*betweenness + 0.2*blockerRatio + 0.1*staleness + 0.1*priorityBoost\n  - Return: IssueID, ImpactScore, ScoreBreakdown map\n\n## Staleness Penalty\n- Days since update, normalized: min(daysSinceUpdate / 30, 1.0)\n- Older items get slight penalty to surface them\n\n## Priority Boost\n- P0=1.0, P1=0.75, P2=0.5, P3=0.25, P4=0.0 (higher priority = higher boost)\n\n## File Changes\n- pkg/analysis/priority.go: New scoring logic\n- pkg/analysis/priority_test.go: Tests with known values","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:39:56.597660662Z","updated_at":"2025-11-27T00:26:30.580840974Z","closed_at":"2025-11-27T00:26:30.580840974Z","labels":["analysis","core-logic"]}
{"id":"bv-lkk.2","title":"Generate priority recommendations with explanations","description":"Compare impact scores to current priorities and generate actionable recommendations.\n\n## Output Structure\ntype PriorityRecommendation struct {\n    IssueID           string\n    CurrentPriority   int\n    SuggestedPriority int\n    ImpactScore       float64\n    Confidence        float64  // 0-1, higher when score difference is large\n    Reasoning         []string // Human-readable explanations\n}\n\n## Reasoning Templates\n- 'Blocks N high-priority items' (when UnblocksCount \u003e 2)\n- 'Critical path bottleneck' (when Betweenness \u003e 0.5)\n- 'High centrality in graph' (when PageRank \u003e 0.3)\n- 'Stale for N days' (when staleness penalty applied)\n\n## Confidence Calculation\n- Large score vs priority mismatch = high confidence\n- Multiple reasoning factors = higher confidence\n- Single weak signal = low confidence\n\n## File Changes\n- pkg/analysis/priority.go: Add recommendation generation\n- pkg/analysis/priority_test.go: Test recommendations","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:39:56.639885343Z","updated_at":"2025-11-27T00:31:17.416692038Z","closed_at":"2025-11-27T00:31:17.416692038Z","labels":["analysis","recommendations"],"dependencies":[{"issue_id":"bv-lkk.2","depends_on_id":"bv-lkk.1","type":"blocks","created_at":"2025-11-26T23:40:11.711767711Z","created_by":"daemon"}]}
{"id":"bv-lkk.3","title":"Add --robot-priority CLI flag","description":"Output priority recommendations as JSON for AI agents and scripts.\n\n## Flag Definition\nrobotPriority := flag.Bool('robot-priority', false, 'Output priority recommendations as JSON')\n\n## Output Format\n{\n  'recommendations': [{\n    'id': 'issue-123',\n    'current_priority': 2,\n    'suggested_priority': 0,\n    'impact_score': 0.85,\n    'confidence': 0.9,\n    'reasoning': ['Blocks 5 high-priority items', 'Critical path bottleneck']\n  }],\n  'summary': {\n    'total_issues': 50,\n    'recommendations': 8,\n    'high_confidence': 3\n  }\n}\n\n## Sorting\n- Sort by confidence DESC, then impact_score DESC\n- Top issues are most confident recommendations\n\n## File Changes\n- cmd/bv/main.go: Add flag and output logic","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:39:56.677162491Z","updated_at":"2025-11-27T00:32:47.17308551Z","closed_at":"2025-11-27T00:32:47.17308551Z","labels":["ai-agent","cli"],"dependencies":[{"issue_id":"bv-lkk.3","depends_on_id":"bv-lkk.2","type":"blocks","created_at":"2025-11-26T23:40:11.759405449Z","created_by":"daemon"}]}
{"id":"bv-lkk.4","title":"Add TUI priority suggestion indicators","description":"Show â¬†ï¸/â¬‡ï¸ indicators when suggested priority differs from current. 'p' toggles visibility. Detail view shows full analysis.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:39:56.713559233Z","updated_at":"2025-11-27T01:03:21.300801986Z","closed_at":"2025-11-27T01:03:21.300801986Z","labels":["tui","user-experience"],"dependencies":[{"issue_id":"bv-lkk.4","depends_on_id":"bv-lkk.2","type":"blocks","created_at":"2025-11-26T23:40:11.791287875Z","created_by":"daemon"}]}
{"id":"bv-qjc","title":"Actionable Exports \u0026 Hooks System","description":"Enhance exports to include runnable commands and add a hook system for automation.\n\n## Background \u0026 Motivation\nCurrent exports are read-only reports. Users want exports that enable action: 'here's the command to close these resolved issues' or 'here's the PR description for this work'.\n\n## Value Proposition\n- For Humans: Exports include copy-paste ready commands\n- For AI Agents: Chain exports â†’ actions without manual parsing\n\n## Technical Approach\n1. Enhance markdown export with bd command snippets\n2. Add hook system (pre-export, post-export)\n3. Hook configuration in .bv/hooks.yaml\n4. Environment variables passed to hooks\n\n## Hook Use Cases\n- Post to Slack after export\n- Create GitHub issue from bead\n- Trigger CI pipeline\n- Sync to external tracker\n\n## Security Considerations\n- Hooks are opt-in (require explicit config)\n- Commands are not auto-executed\n- Hook output captured but not interpreted","status":"open","priority":2,"issue_type":"epic","created_at":"2025-11-26T23:36:37.178866162Z","updated_at":"2025-11-26T23:36:37.178866162Z","labels":["automation","export","hooks"]}
{"id":"bv-qjc.1","title":"Add command snippets to markdown export","description":"Include ready-to-run bd commands in markdown exports.\n\n## Export Enhancement\nAdd 'Quick Actions' section to markdown export:\n\n### Quick Actions\n```bash\n# Close all resolved items in this export\nbd close issue-1 issue-2 issue-3\n\n# Bulk priority update\nbd update issue-4 issue-5 -p P1\n```\n\n## Per-Issue Actions\nEach issue card includes:\n- bd close \u003cid\u003e: Mark as done\n- bd comment \u003cid\u003e '\u003ctext\u003e': Add comment\n- bd update \u003cid\u003e -p \u003cpriority\u003e: Change priority\n\n## Implementation\n- Add CommandSnippets field to export.Options\n- Generate commands based on current state\n- Use proper escaping for shell safety\n\n## File Changes\n- pkg/export/markdown.go: Add command generation\n- pkg/export/markdown_test.go: Test command output","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-26T23:40:24.899902692Z","updated_at":"2025-11-26T23:49:10.031138146Z","labels":["automation","export"]}
{"id":"bv-qjc.2","title":"Design and implement hook configuration system","description":"Design and implement hook configuration system.\n\n## Configuration File\n.bv/hooks.yaml:\n```yaml\nhooks:\n  pre-export:\n    - name: validate-issues\n      command: './scripts/validate.sh'\n      timeout: 10s\n  post-export:\n    - name: slack-notify\n      command: 'curl -X POST ...'\n      timeout: 30s\n      env:\n        SLACK_WEBHOOK: ${SLACK_WEBHOOK}\n```\n\n## Environment Variables Passed to Hooks\n- BV_EXPORT_PATH: Output file path\n- BV_EXPORT_FORMAT: 'markdown' or 'json'\n- BV_ISSUE_COUNT: Number of issues exported\n- BV_TIMESTAMP: Export timestamp\n\n## Hook Execution\n- 30s default timeout, configurable per hook\n- Failures logged but don't break export (unless pre-export)\n- pre-export failure cancels export\n- Stdout/stderr captured and displayed\n\n## File Changes\n- pkg/hooks/config.go: Configuration types and loader\n- pkg/hooks/executor.go: Hook execution logic\n- pkg/hooks/executor_test.go: Tests","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-26T23:40:24.939948976Z","updated_at":"2025-11-26T23:49:21.889760702Z","labels":["configuration","hooks"]}
{"id":"bv-qjc.3","title":"Integrate hooks with export pipeline","description":"Wire hooks into export flow: load config â†’ pre-export â†’ generate â†’ write â†’ post-export. --no-hooks flag. Hook output displayed.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-26T23:40:24.980899767Z","updated_at":"2025-11-26T23:40:24.980899767Z","labels":["export","hooks","integration"],"dependencies":[{"issue_id":"bv-qjc.3","depends_on_id":"bv-qjc.2","type":"blocks","created_at":"2025-11-26T23:40:38.920378322Z","created_by":"daemon"}]}
{"id":"bv-ub7","title":"Topological Work-Plan Generator","description":"Leverage the existing DAG analysis to generate linearized, dependency-respecting work plans. This is the highest-value feature because it directly answers the question every developer and AI agent asks: 'What can I actually work on right now?'\n\n## Background \u0026 Motivation\nThe analysis package already computes TopologicalOrder via topo.Sort(). However, this raw ordering isn't directly actionable because:\n1. It includes closed issues\n2. It doesn't filter to 'leaf nodes' (tasks with no open blockers)\n3. It's not exposed via CLI for programmatic access\n\n## Value Proposition\n- For Humans: A 'Smart To-Do' view showing only actionable items eliminates cognitive overhead of scanning blocked tasks.\n- For AI Agents: --robot-plan enables autonomous workflows where agents can request a strictly ordered task list, preventing work on blocked items.\n\n## Technical Approach\n1. Add GetActionableIssues() to analysis package - returns issues where all blocking dependencies are closed\n2. Add GetExecutionPlan() - returns topologically sorted actionable items with parallel tracks identified\n3. CLI flag --robot-plan outputs JSON with execution order\n4. TUI view showing actionable items grouped by parallel tracks\n\n## Success Criteria\n- Agent can request plan and receive valid execution order\n- Plan respects all blocking dependencies\n- Parallel tracks (independent work streams) are identified\n- Zero actionable items shown when all open issues are blocked","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-11-26T23:35:42.137355284Z","updated_at":"2025-11-27T01:09:04.691007979Z","closed_at":"2025-11-27T01:09:04.691007979Z","labels":["ai-agent","builds-on-existing","high-value"]}
{"id":"bv-ub7.1","title":"Add GetActionableIssues() to analysis package","description":"Identify issues that can be worked on immediately - those with no open blocking dependencies.\n\n## Algorithm\nfunc (a *Analyzer) GetActionableIssues() []model.Issue:\n  - Skip closed issues\n  - Skip issues with open blockers (only 'blocks' type creates hard deps)\n  - Missing blockers don't block (graceful degradation)\n\n## Key Design Decisions\n1. Only 'blocks' type creates hard dependencies - 'related' and 'parent-child' are informational\n2. Missing blockers don't block - Graceful degradation when referenced issue doesn't exist\n3. Closed issues are never actionable - They're done\n\n## File Changes\n- pkg/analysis/graph.go: Add methods to Analyzer struct\n- pkg/analysis/graph_test.go: Add comprehensive tests\n\n## Acceptance Criteria\n- [ ] Returns only open/in_progress/blocked issues\n- [ ] Correctly identifies issues with no open blockers\n- [ ] Handles missing dependency references gracefully\n- [ ] Handles cycles gracefully\n- [ ] Unit tests cover all edge cases","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:37:33.191897508Z","updated_at":"2025-11-27T00:07:29.249293984Z","closed_at":"2025-11-27T00:07:29.249301284Z","labels":["analysis","core-logic"]}
{"id":"bv-ub7.2","title":"Add GetExecutionPlan() with parallel track detection","description":"Generate a dependency-respecting execution plan with parallel tracks identified for concurrent work.\n\n## Data Structure\ntype ExecutionPlan struct {\n    Tracks []ExecutionTrack\n    Total  int\n}\n\ntype ExecutionTrack struct {\n    TrackID string\n    Items   []PlanItem\n    Reason  string  // Why these are grouped\n}\n\ntype PlanItem struct {\n    ID          string\n    Title       string\n    Priority    int\n    UnblocksIDs []string  // What becomes actionable when done\n}\n\n## Algorithm\n1. Get actionable issues from GetActionableIssues()\n2. Identify connected components among actionable issues\n3. Within each component, sort by priority then topological order\n4. For each item, compute what it unblocks\n\n## Considerations\n- Parallel Tracks: Independent subgraphs can be worked on concurrently\n- Unblocks Info: Helps prioritize - 'doing X unblocks 5 other tasks'\n- Priority Integration: Within tracks, respect explicit priority\n\n## File Changes\n- pkg/analysis/plan.go: New file with plan generation logic\n- pkg/analysis/plan_test.go: Tests","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:37:45.642860966Z","updated_at":"2025-11-27T00:10:27.135375792Z","closed_at":"2025-11-27T00:10:27.135386592Z","labels":["analysis","core-logic"],"dependencies":[{"issue_id":"bv-ub7.2","depends_on_id":"bv-ub7.1","type":"blocks","created_at":"2025-11-26T23:38:34.543909796Z","created_by":"daemon"}]}
{"id":"bv-ub7.3","title":"Add --robot-plan CLI flag","description":"Expose execution plan via CLI for AI agents and scripts.\n\n## Flag Definition\nrobotPlan := flag.Bool('robot-plan', false, 'Output dependency-respecting execution plan as JSON')\n\n## Output Format\n{\n  'generated_at': '2025-11-26T20:00:00Z',\n  'tracks': [{\n    'track_id': 'track-1',\n    'items': [{\n      'id': 'issue-123',\n      'title': 'Implement feature X',\n      'priority': 1,\n      'unblocks': ['issue-456', 'issue-789']\n    }],\n    'reason': 'Independent work stream focused on auth module'\n  }],\n  'total_actionable': 5,\n  'total_blocked': 12,\n  'summary': {\n    'highest_impact': 'issue-123',\n    'impact_reason': 'Unblocks 3 high-priority tasks'\n  }\n}\n\n## Usage Examples\nbv --robot-plan  # Get full plan\nbv --robot-plan | jq '.tracks[0].items[0]'  # First actionable item\n\n## File Changes\n- cmd/bv/main.go: Add flag parsing and output logic\n\n## Acceptance Criteria\n- [ ] --robot-plan outputs valid JSON\n- [ ] Exit code 0 on success, non-zero on error\n- [ ] Errors go to stderr, plan to stdout\n- [ ] Works with existing filters","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:37:58.626513035Z","updated_at":"2025-11-27T00:12:56.417898302Z","closed_at":"2025-11-27T00:12:56.417898302Z","labels":["ai-agent","cli"],"dependencies":[{"issue_id":"bv-ub7.3","depends_on_id":"bv-ub7.2","type":"blocks","created_at":"2025-11-26T23:38:34.584911759Z","created_by":"daemon"}]}
{"id":"bv-ub7.4","title":"Add TUI Actionable view with 'a' keybinding","description":"Provide a focused view showing only items that can be worked on immediately.\n\n## Keybinding\n'a' - Toggle Actionable view (similar to 'b' for board, 'g' for graph)\n\n## View Design\nâ”Œâ”€ ACTIONABLE (5 items) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Track 1: Auth Module                          â”‚\nâ”‚ â”œâ”€ ğŸ”¥ P0 AUTH-123 Fix login timeout          â”‚\nâ”‚ â”‚      â””â”€ Unblocks: AUTH-456, AUTH-789        â”‚\nâ”‚ â””â”€ âš¡ P1 AUTH-124 Add OAuth support          â”‚\nâ”‚                                               â”‚\nâ”‚ Track 2: API Layer                            â”‚\nâ”‚ â””â”€ ğŸ”¹ P2 API-001 Refactor endpoints          â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n## Features\n- Group by track (parallel work streams)\n- Show unblocks count for each item\n- Priority indicators\n- Navigation: j/k for up/down, enter for details\n\n## File Changes\n- pkg/ui/actionable.go: New view component\n- pkg/ui/actionable_test.go: Tests\n- pkg/ui/model.go: Add keybinding and state\n\n## Acceptance Criteria\n- [ ] 'a' key toggles actionable view\n- [ ] Shows items grouped by independent tracks\n- [ ] Displays unblock counts\n- [ ] Navigation works correctly","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:38:12.680418277Z","updated_at":"2025-11-27T01:00:29.340952874Z","closed_at":"2025-11-27T01:00:29.340952874Z","labels":["tui","user-experience"],"dependencies":[{"issue_id":"bv-ub7.4","depends_on_id":"bv-ub7.2","type":"blocks","created_at":"2025-11-26T23:38:34.615282328Z","created_by":"daemon"}]}
{"id":"bv-ub7.5","title":"Add comprehensive tests for work plan generation","description":"Ensure work plan generation is correct and handles edge cases.\n\n## Test Cases\n\n### Happy Path\n- [ ] Simple chain: A blocks B blocks C â†’ only C is actionable\n- [ ] Parallel chains: Aâ†’B, Câ†’D â†’ B and D actionable in separate tracks\n- [ ] Mixed: Some actionable, some blocked\n\n### Edge Cases\n- [ ] Empty issue list â†’ empty plan\n- [ ] All issues closed â†’ empty plan\n- [ ] All issues blocked by cycles â†’ plan may include cycle members\n- [ ] Single issue with no deps â†’ one track, one item\n- [ ] Deeply nested chain â†’ correct single actionable leaf\n\n### Dependency Edge Cases\n- [ ] Missing blocker reference â†’ doesn't block\n- [ ] 'related' type deps â†’ don't create blocking\n- [ ] Self-referential dep â†’ handled gracefully\n- [ ] Issue blocks itself via chain â†’ cycle detection\n\n### Integration Tests\n- [ ] --robot-plan produces valid JSON\n- [ ] Plan respects status filters\n- [ ] Plan updates when issues change\n\n## File Changes\n- pkg/analysis/plan_test.go: Comprehensive unit tests\n- test/e2e/plan_test.go: End-to-end CLI tests\n\n## Acceptance Criteria\n- [ ] 90%+ code coverage on plan generation\n- [ ] All edge cases documented and tested\n- [ ] CI passes with new tests","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:38:28.191119317Z","updated_at":"2025-11-27T01:08:41.684453391Z","closed_at":"2025-11-27T01:08:41.684453391Z","labels":["quality","testing"],"dependencies":[{"issue_id":"bv-ub7.5","depends_on_id":"bv-ub7.2","type":"blocks","created_at":"2025-11-26T23:38:34.64136186Z","created_by":"daemon"}]}
{"id":"bv-ufd","title":"Context Packs \u0026 Recipes System","description":"Implement named workflow presets ('recipes') that bundle filters, layouts, and exports into one-command operations. This dramatically simplifies common workflows for both humans and AI agents.\n\n## Background \u0026 Motivation\nUsers repeatedly perform the same sequences: 'Show me blocked high-priority items' or 'Export a release changelog'. Currently this requires remembering multiple flags. Recipes encode these patterns.\n\n## Value Proposition\n- For Humans: 'bv --recipe triage' replaces 'bv --status open,blocked --priority 0,1 --sort priority'\n- For AI Agents: Recipes provide semantic entry points - 'triage mode' vs 'release mode' vs 'dependency analysis mode'\n\n## Technical Approach\n1. Define recipe schema (YAML)\n2. Embed sensible default recipes\n3. Allow user-defined recipes in .bv/recipes.yaml\n4. CLI: bv --recipe \u003cname\u003e or bv -r \u003cname\u003e\n5. TUI: Recipe picker with descriptions\n\n## Built-in Recipes\n- triage: Open/blocked issues, sorted by priority\n- release-cut: Recently closed issues for changelog\n- blocked-review: All blocked items with blocker info\n- dependency-risk: High betweenness/PageRank items\n- quick-wins: Low-priority, no-dependency items\n- stale: Items not updated in 14+ days","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-26T23:35:57.447095883Z","updated_at":"2025-11-27T01:15:09.04831944Z","closed_at":"2025-11-27T01:15:09.04831944Z","labels":["ai-agent","developer-experience","workflow"]}
{"id":"bv-ufd.1","title":"Define recipe schema and configuration structure","description":"Design the YAML schema for recipe definitions that is both human-writable and machine-parseable.\n\n## Schema Design\nrecipes:\n  triage:\n    description: 'Focus on urgent open/blocked items'\n    filters:\n      status: [open, blocked]\n      priority_max: 2\n    sort:\n      by: priority\n      direction: asc\n    view: board\n    export: null\n\n## Schema Fields\n- description: Human-readable explanation\n- filters: Issue filtering criteria\n- sort: Sort order\n- view: Which view to activate\n- export: Optional auto-export configuration\n- metrics: Optional metric-based filtering\n\n## File Changes\n- pkg/recipe/types.go: Schema types\n- pkg/recipe/schema.go: Validation logic\n\n## Acceptance Criteria\n- [ ] Schema supports all current filter options\n- [ ] Relative time expressions work (14d, 1w, etc.)\n- [ ] Validation catches invalid recipes at load time","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:38:47.790000865Z","updated_at":"2025-11-27T00:16:11.899416433Z","closed_at":"2025-11-27T00:16:11.899416433Z","labels":["configuration","design"]}
{"id":"bv-ufd.2","title":"Implement recipe loader with embedded defaults","description":"Load recipes from embedded defaults and user configuration, with proper merging.\n\n## Loading Order (later overrides earlier)\n1. Embedded defaults (compiled into binary)\n2. User config at ~/.config/bv/recipes.yaml (global)\n3. Project config at .bv/recipes.yaml (local)\n\n## Embedded Defaults\nUse Go embed to include default recipes:\n//go:embed defaults/recipes.yaml\nvar defaultRecipes []byte\n\n## Merge Strategy\n- User recipes with same name override defaults completely\n- User can disable a default recipe: triage: null\n- Unknown keys in user config generate warnings\n\n## Discovery Endpoint\nfunc (l *Loader) ListRecipes() []RecipeSummary\nEnables --robot-recipes for AI agent discovery.\n\n## File Changes\n- pkg/recipe/loader.go: Loading and merging logic\n- pkg/recipe/defaults/recipes.yaml: Embedded defaults\n- pkg/recipe/loader_test.go: Tests","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:38:59.945581598Z","updated_at":"2025-11-27T00:18:56.165622013Z","closed_at":"2025-11-27T00:18:56.165622013Z","labels":["configuration","core-logic"],"dependencies":[{"issue_id":"bv-ufd.2","depends_on_id":"bv-ufd.1","type":"blocks","created_at":"2025-11-26T23:39:43.048093687Z","created_by":"daemon"}]}
{"id":"bv-ufd.3","title":"Create built-in recipe library","description":"Provide a curated set of immediately useful recipes.\n\n## Recipes to Implement\n\n### 1. triage\ndescription: Urgent items needing attention\nfilters: status=[open,blocked], priority_max=2\nview: board\n\n### 2. release-cut\ndescription: Recently closed items for changelog\nfilters: status=[closed], updated_since=14d\nview: list\n\n### 3. blocked-review\ndescription: All blocked items with blocker info\nfilters: status=[blocked]\nview: list, show_blockers=true\n\n### 4. dependency-risk\ndescription: High-impact bottleneck nodes\nfilters: status=[open,in_progress]\nview: insights, insights_panel=bottlenecks\n\n### 5. quick-wins\ndescription: Easy items with no blockers\nfilters: status=[open], has_blockers=false\nview: list\n\n### 6. stale\ndescription: Items not updated in 14+ days\nfilters: status=[open,in_progress], updated_before=14d\nview: list\n\n### 7. my-work\ndescription: Items assigned to current user\nfilters: assignee=$USER\nview: board\n\n## File Changes\n- pkg/recipe/defaults/recipes.yaml","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:39:12.742325056Z","updated_at":"2025-11-27T00:19:54.792566939Z","closed_at":"2025-11-27T00:19:54.792566939Z","labels":["content","defaults"],"dependencies":[{"issue_id":"bv-ufd.3","depends_on_id":"bv-ufd.1","type":"blocks","created_at":"2025-11-26T23:39:43.088545016Z","created_by":"daemon"}]}
{"id":"bv-ufd.4","title":"Add --recipe CLI flag and --robot-recipes discovery","description":"Expose recipes via command-line interface.\n\n## Flags\n--recipe NAME or -r NAME: Apply named recipe\n--robot-recipes: List available recipes as JSON\n\n## --robot-recipes Output\n{\n  'recipes': [\n    {'name': 'triage', 'description': 'Urgent items needing attention', 'source': 'builtin'},\n    {'name': 'my-custom', 'description': 'Custom team workflow', 'source': 'project'}\n  ]\n}\n\n## Recipe Application\nWhen --recipe triage is used:\n1. Load recipe definition\n2. Apply filters to issue list\n3. Apply sort order\n4. Set initial view mode\n5. If export specified, run export and exit\n\n## Error Handling\n- Unknown recipe name: list available recipes and exit 1\n- Invalid recipe config: show validation error\n\n## File Changes\n- cmd/bv/main.go: Flag parsing and recipe application\n\n## Acceptance Criteria\n- [ ] --recipe triage applies triage recipe\n- [ ] -r triage shorthand works\n- [ ] --robot-recipes lists all available recipes\n- [ ] Unknown recipe shows helpful error","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-26T23:39:25.159178017Z","updated_at":"2025-11-27T00:55:35.009664218Z","closed_at":"2025-11-27T00:55:35.009664218Z","labels":["ai-agent","cli"],"dependencies":[{"issue_id":"bv-ufd.4","depends_on_id":"bv-ufd.2","type":"blocks","created_at":"2025-11-26T23:39:43.115461602Z","created_by":"daemon"}]}
{"id":"bv-ufd.5","title":"Add TUI recipe picker overlay","description":"Allow users to browse and apply recipes from within the TUI.\n\n## Keybinding\n'R' (shift-r) - Open recipe picker overlay\n\n## Overlay Design\nâ”Œâ”€ Select Recipe â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  \u003e triage                                   â”‚\nâ”‚    Urgent items needing attention           â”‚\nâ”‚                                             â”‚\nâ”‚    release-cut                              â”‚\nâ”‚    Recently closed items for changelog      â”‚\nâ”‚                                             â”‚\nâ”‚ j/k: navigate â€¢ enter: apply â€¢ esc: cancel  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n## Interaction\n- j/k or up/down to navigate\n- enter to apply selected recipe\n- esc to cancel\n- Applying recipe changes filters, sort, and view\n\n## Footer Update\nWhen recipe is active, show: 'Recipe: triage | ...'\n\n## File Changes\n- pkg/ui/recipe_picker.go: Picker component\n- pkg/ui/model.go: Add keybinding and state","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T23:39:37.456844031Z","updated_at":"2025-11-27T01:14:53.400273324Z","closed_at":"2025-11-27T01:14:53.400273324Z","labels":["tui","user-experience"],"dependencies":[{"issue_id":"bv-ufd.5","depends_on_id":"bv-ufd.2","type":"blocks","created_at":"2025-11-26T23:39:43.16503446Z","created_by":"daemon"}]}
